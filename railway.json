{
  "$schema": "https://railway.com/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE"
  },
  "deploy": {
    "numReplicas": 1,
    "sleepApplication": false,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  },
  "environments": {
    "production": {
      "variables": {
        "PORT": "8080",
        "PGHOST": "${{Postgres.RAILWAY_PRIVATE_DOMAIN}}",
        "PGPORT": "${{Postgres.PGPORT}}",
        "PGUSER": "${{Postgres.PGUSER}}",
        "PGPASSWORD": "${{Postgres.PGPASSWORD}}",
        "PGDATABASE": "${{Postgres.PGDATABASE}}",
        "REDIS_HOST": "${{Redis.RAILWAY_PRIVATE_DOMAIN}}",
        "REDIS_PORT": "${{Redis.REDISPORT}}",
        "REDIS_PASSWORD": "${{Redis.REDIS_PASSWORD}}",
        "NEXTCLOUD_TRUSTED_DOMAINS": "${{RAILWAY_PUBLIC_DOMAIN}} localhost",
        "NEXTCLOUD_ADMIN_USER": null,
        "NEXTCLOUD_ADMIN_PASSWORD": null,
        "NEXTCLOUD_DATA_DIR": "/var/www/html/data",
        "NEXTCLOUD_TABLE_PREFIX": "oc_"
      }
    }
  }
}
