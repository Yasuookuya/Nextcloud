{
  "$schema": "https://railway.com/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE"
  },
  "deploy": {
    "numReplicas": 1,
    "sleepApplication": false,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  },
  "environments": {
    "production": {
      "variables": {
        "PGHOST": "${{Postgres-iG4t.PGHOST}}",
        "PGPORT": "${{Postgres-iG4t.PGPORT}}",
        "PGUSER": "${{Postgres-iG4t.PGUSER}}",
        "PGPASSWORD": "${{Postgres-iG4t.PGPASSWORD}}",
        "PGDATABASE": "${{Postgres-iG4t.PGDATABASE}}",
        "REDIS_PASSWORD": "${{Redis.REDIS_PASSWORD}}",
        "NEXTCLOUD_TRUSTED_DOMAINS": "${{RAILWAY_PUBLIC_DOMAIN}} localhost engineering.kikaiworks.com",
        "NEXTCLOUD_DATA_DIR": "/var/www/html/data",
        "NEXTCLOUD_TABLE_PREFIX": "oc_",
        "NEXTCLOUD_UPDATE_CHECKER": "false",
        "PHP_MEMORY_LIMIT": "512M",
        "PHP_UPLOAD_LIMIT": "2G",
        "REDISHOST": "${{Redis.REDISHOST}}",
        "REDISPASSWORD": "${{Redis.REDISPASSWORD}}",
        "REDISPORT": "${{Redis.REDISPORT}}",
        "NEXTCLOUD_ADMIN_USER": null,
        "NEXTCLOUD_ADMIN_PASSWORD": null
      }
    }
  }
}
